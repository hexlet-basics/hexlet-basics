# typed: true

# DO NOT EDIT MANUALLY
# This is an autogenerated file for types exported from the `falcon` gem.
# Please instead update this file by running `bin/tapioca gem falcon`.


# source://falcon//lib/falcon/middleware/verbose.rb#9
module Falcon; end

# Pre-defined environments for hosting web applications.
#
# See {Configuration::Loader#load} for more details.
#
# source://falcon//lib/falcon/environment/server.rb#13
module Falcon::Environment; end

# Provides an environment for hosting a web application that uses TLS.
#
# source://falcon//lib/falcon/environment/application.rb#13
module Falcon::Environment::Application
  include ::Async::Service::Managed::Environment
  include ::Falcon::Environment::Server

  # The endpoint that will be used for communicating with the application server.
  #
  # source://falcon//lib/falcon/environment/application.rb#45
  def endpoint; end

  # The IPC path to use for communication with the application.
  #
  # source://falcon//lib/falcon/environment/application.rb#39
  def ipc_path; end

  # The middleware stack for the application.
  #
  # source://falcon//lib/falcon/environment/application.rb#18
  def middleware; end

  # The protocol to use to communicate with the application.
  #
  # Typically one of {Async::HTTP::Protocol::HTTP1} or {Async::HTTP::Protocl::HTTP2}.
  #
  # source://falcon//lib/falcon/environment/application.rb#33
  def protocol; end

  # The scheme to use to communicate with the application.
  #
  # source://falcon//lib/falcon/environment/application.rb#24
  def scheme; end
end

# source://falcon//lib/falcon/environment.rb#11
Falcon::Environment::LEGACY_ENVIRONMENTS = T.let(T.unsafe(nil), Hash)

# Provides an environment for hosting a web application that use a Rackup `config.ru` file.
#
# source://falcon//lib/falcon/environment/rack.rb#13
module Falcon::Environment::Rack
  include ::Async::Service::Managed::Environment
  include ::Falcon::Environment::Server
  include ::Falcon::Environment::Application
  include ::Falcon::Environment::Rackup
end

# Provides an environment for hosting loading a Rackup `config.ru` file.
#
# source://falcon//lib/falcon/environment/rackup.rb#12
module Falcon::Environment::Rackup
  # source://falcon//lib/falcon/environment/rackup.rb#21
  def middleware; end

  # source://falcon//lib/falcon/environment/rackup.rb#17
  def rack_app; end

  # source://falcon//lib/falcon/environment/rackup.rb#13
  def rackup_path; end
end

# Provides an environment for hosting a web application that uses a Falcon server.
#
# source://falcon//lib/falcon/environment/server.rb#15
module Falcon::Environment::Server
  include ::Async::Service::Managed::Environment

  # The server authority. Defaults to the server name.
  #
  # source://falcon//lib/falcon/environment/server.rb#26
  def authority; end

  # Whether to enable the HTTP cache for this server.
  #
  # source://falcon//lib/falcon/environment/server.rb#60
  def cache; end

  # A client endpoint that can be used to connect to the server.
  #
  # source://falcon//lib/falcon/environment/server.rb#66
  def client_endpoint; end

  # The upstream endpoint that will handle incoming requests.
  #
  # source://falcon//lib/falcon/environment/server.rb#50
  def endpoint; end

  # Options to use when creating the endpoint.
  #
  # source://falcon//lib/falcon/environment/server.rb#41
  def endpoint_options; end

  # Make a server instance using the given endpoint. The endpoint may be a bound endpoint, so we take care to specify the protocol and scheme as per the original endpoint.
  #
  # source://falcon//lib/falcon/environment/server.rb#74
  def make_server(endpoint); end

  # The service class to use for the proxy.
  #
  # source://falcon//lib/falcon/environment/server.rb#20
  def service_class; end

  # The timeout used for client connections.
  #
  # source://falcon//lib/falcon/environment/server.rb#36
  def timeout; end

  # The host that this server will receive connections for.
  #
  # source://falcon//lib/falcon/environment/server.rb#31
  def url; end

  # Whether to enable verbose logging.
  #
  # source://falcon//lib/falcon/environment/server.rb#55
  def verbose; end
end

# source://falcon//lib/falcon/middleware/verbose.rb#10
module Falcon::Middleware; end

# A HTTP middleware for logging requests and responses.
#
# source://falcon//lib/falcon/middleware/verbose.rb#12
class Falcon::Middleware::Verbose < ::Protocol::HTTP::Middleware
  # Initialize the verbose middleware.
  #
  # @return [Verbose] a new instance of Verbose
  #
  # source://falcon//lib/falcon/middleware/verbose.rb#16
  def initialize(app, logger = T.unsafe(nil)); end

  # Log details of the incoming request.
  #
  # source://falcon//lib/falcon/middleware/verbose.rb#23
  def annotate(request); end

  # Log details of the incoming request using {annotate} and wrap the response to log response details too.
  #
  # source://falcon//lib/falcon/middleware/verbose.rb#33
  def call(request); end
end

# An endpoint suitable for proxing requests, typically via a unix pipe.
#
# source://falcon//lib/falcon/proxy_endpoint.rb#10
class Falcon::ProxyEndpoint < ::IO::Endpoint::Generic
  # Initialize the proxy endpoint.
  #
  # @return [ProxyEndpoint] a new instance of ProxyEndpoint
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#13
  def initialize(endpoint, **options); end

  # The authority to use for this endpoint.
  # e.g. `"myapp.com"`.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#43
  def authority; end

  # Bind to the endpoint.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#53
  def bind(&block); end

  # Connect to the endpoint.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#48
  def connect(&block); end

  # Enumerate the endpoint.
  # If the endpoint has multiple underlying endpoints, this will enumerate them individually.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#61
  def each; end

  # The actual endpoint for I/O.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#25
  def endpoint; end

  # The protocol to use for this connection.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#29
  def protocol; end

  # The scheme to use for this endpoint.
  # e.g. `"http"`.
  #
  # source://falcon//lib/falcon/proxy_endpoint.rb#36
  def scheme; end

  # source://falcon//lib/falcon/proxy_endpoint.rb#19
  def to_s; end

  class << self
    # Create a proxy unix endpoint with the specific path.
    #
    # source://falcon//lib/falcon/proxy_endpoint.rb#71
    def unix(path, **options); end
  end
end

# A server listening on a specific endpoint, hosting a specific middleware.
#
# source://falcon//lib/falcon/server.rb#17
class Falcon::Server < ::Async::HTTP::Server
  # @return [Server] a new instance of Server
  #
  # source://falcon//lib/falcon/server.rb#39
  def initialize(*_arg0, **_arg1, &_arg2); end

  # source://falcon//lib/falcon/server.rb#53
  def accept(*_arg0, **_arg1, &_arg2); end

  # Returns the value of attribute accept_count.
  #
  # source://falcon//lib/falcon/server.rb#50
  def accept_count; end

  # source://falcon//lib/falcon/server.rb#62
  def call(*_arg0, **_arg1, &_arg2); end

  # Returns the value of attribute connect_count.
  #
  # source://falcon//lib/falcon/server.rb#51
  def connect_count; end

  # Returns the value of attribute request_count.
  #
  # source://falcon//lib/falcon/server.rb#49
  def request_count; end

  # Generates a human-readable string representing the current statistics.
  #
  # e.g. `C=23/3.42K R=2/3.42K L=0.273`
  #
  # This can be interpreted as:
  #
  # - `C=23/3.42K` - The number of connections currently open and the total number of connections accepted.
  # - `R=2/3.42K` - The number of requests currently being processed and the total number of requests received.
  # - `L=0.273` - The average scheduler load of the server, where 0.0 is idle and 1.0 is fully loaded.
  #
  # source://falcon//lib/falcon/server.rb#82
  def statistics_string; end

  private

  # source://falcon//lib/falcon/server.rb#88
  def format_count(value); end

  class << self
    # Wrap a rack application into a middleware suitable the server.
    #
    # source://falcon//lib/falcon/server.rb#22
    def middleware(rack_app, verbose: T.unsafe(nil), cache: T.unsafe(nil)); end
  end
end

# source://falcon//lib/falcon/service/server.rb#14
module Falcon::Service; end

# source://falcon//lib/falcon/service/server.rb#15
class Falcon::Service::Server < ::Async::Service::Managed::Service
  # @return [Server] a new instance of Server
  #
  # source://falcon//lib/falcon/service/server.rb#16
  def initialize(*_arg0, **_arg1, &_arg2); end

  # Run the service logic.
  #
  # source://falcon//lib/falcon/service/server.rb#40
  def run(instance, evaluator); end

  # Prepare the bound endpoint for the server.
  #
  # source://falcon//lib/falcon/service/server.rb#23
  def start; end

  # Close the bound endpoint.
  #
  # source://falcon//lib/falcon/service/server.rb#69
  def stop(*_arg0, **_arg1, &_arg2); end

  private

  # Format the process title with server statistics.
  #
  # source://falcon//lib/falcon/service/server.rb#63
  def format_title(evaluator, server); end
end
